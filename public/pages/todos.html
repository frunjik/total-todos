<ui-plugin path="~PATH~">
	<h1>Todos</h1>

	<div>
		<span class="exec link" data-exec="?/create">Add todo</span>
	</div>
	<br />

	<div data-bind="?.data__template">
		<script type="text/html">
			{{ foreach m in value }}
				<div>{{ m.title }}</div>
			{{ end }}
		</script>
	</div>
</ui-plugin>

<ui-component name="importer" path="common.form" config="if:todo;url:/forms/todo.html"></ui-component>

<script>
	PLUGIN(function(exports) {

		exports.refresh = function() {
			exports.ajax('GET /api/todos/ @showloading', 'data @hideloading');
		};

		exports.create = function() {
			SET('todosform @default', {});
			SET('common.form', 'todo');
		};
	});
</script>